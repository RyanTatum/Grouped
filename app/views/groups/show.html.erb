<!--<!DOCTYPE html>
<html>-->
<head>
  <script type="text/javascript" async="" src="//www.googleadservices.com/pagead/conversion_async.js"></script><script type="text/javascript" async="" src="//munchkin.marketo.net/151/munchkin.js"></script><script type="text/javascript" async="" src="//munchkin.marketo.net/151/munchkin.js"></script><script async="" src="//connect.facebook.net/en_US/fbds.js"></script><script async="" src="//www.googletagmanager.com/gtm.js?id=GTM-56BZ4D"></script><script type="text/javascript" async="" src="https://tag.perfectaudience.com/serve/52373e831aa4c02794000069.js"></script><script type="text/javascript" async="" src="https://ssl.google-analytics.com/ga.js"></script>
    <title>Home | Parse</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:600italic,400,600,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Raleway:100" rel="stylesheet" type="text/css">
    <!--<%= stylesheet_link_tag "application", media: "all", "data-turbolinks-track" => true %>
    <%= javascript_include_tag "application", "data-turbolinks-track" => true %>-->

        <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
        <meta name="apple-mobile-web-app-title" content="Parse">
        <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
        <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
        <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
        <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
        <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
        <meta name="msapplication-TileColor" content="#5298fc">
        <meta name="msapplication-TileImage" content="/mstile-144x144.png">
        <meta name="application-name" content="Parse">

    <script>if(Function('/*@cc_on return document.documentMode===10@*/')()){document.documentElement.className+=' ie10';}</script>

    <meta name="csrf-param" content="authenticity_token">
    <meta name="csrf-token" content="uYGOKj06BBOqKKGdqZEXaFHgNN/1qJG/w+WJwP803q8=">
    <meta name="description" content="Focus on creating unique &amp; engaging apps on any platform. We take care of everything else your app needs, from the core of your app to analytics and push notifications.">
    <meta name="keywords" content="backend, mobile, development, server, code">
    <meta property="fb:app_id" content="361736430535656">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Parse">
    <meta property="og:image" content="http://parse.com/images/og/default.jpg">
    <meta property="og:description" content="Focus on creating unique &amp; engaging apps on any platform. We take care of everything else your app needs, from the core of your app to analytics and push notifications.">
    <meta property="og:url" content="https://parse.com/apps">
    <meta name="viewport" content="width=device-width, initial-scale=1"><script src="//www.parsecdn.com/js/parse-1.6.14.min.js"></script>
    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
    <script src="//www.parsecdn.com/js/parse-1.6.14.min.js"></script>
    <script type="text/javascript" async="" src="https://pixel-geo.prfct.co/tagjs?a_id=16580&amp;source=js_tag"></script>
</head>
<% if @group_record["group_icon"]
    tempStr = @group_record["group_icon"].url
    @group_picture = tempStr.gsub("http" , "https")
  else
    @group_picture = "project.png"
  end
%>

<body>
  <div class="container" id="view">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xs-offset-0 col-sm-offset-0 col-md-offset-3 col-lg-offset-3 toppad" >
        <div class="panel panel-info">
          <div class="panel-heading">
            <h3 class="panel-title">Group</h3>
          </div>
          <div class="panel-body">
            <div class="row">
              <div id= "group_pic" align="center"> 
                <%=image_tag @group_picture, class:" img-responsive" %>
              </div>
              <div id= "group_info"> 
                <table class="table table-user-information">
                  <tbody>
                    <tr>
                      <td>Name</td>
                      <td><%= @group_record["name"] %></td>
                    </tr>
                    <tr>
                      <td>Created on</td>
                      <% dt = DateTime.new(@group_record["createdAt"][0..3].to_i, @group_record["createdAt"][5..6].to_i, @group_record["createdAt"][8..9].to_i) %>
                      <td><%= dt.strftime("%B") %>  <%= @group_record["createdAt"][8..9].to_i.ordinalize %>, <%=dt.strftime("%Y") %></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div id= "custom_footer" class="panel-footer">
            <%if @permissions #@permissions_hash[session[:current_user]["objectId"]] == "group_admin"%>
              <span class="pull-right">
                <button id="edit" class="btn btn-sm btn-warning"><i class="glyphicon glyphicon-edit"></i></button>
              </span>
            <%end%>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="container" id="editprofile" style="display: none">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xs-offset-0 col-sm-offset-0 col-md-offset-3 col-lg-offset-3 toppad" >
        <div class="panel panel-info">
          <div class="panel-heading">
            <h3 class="panel-title">Edit Group</h3>
          </div>
          <%= form_tag(group_path(@group_id), multipart: true, method: 'put') do %>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-3 col-lg-3 " align="center"> 
                <%= image_tag @group_picture, class:"img-responsive" %>
              </div>
              <div class=" col-md-9 col-lg-9 "> 
                <table class="table table-user-information">
                  <tbody>
                    
                    <tr>
                      <td>Name</td>
                      <td><%= text_field_tag(:new_name, @group_record["name"], :required => true, class: "form-control") %></td>
                    </tr>
                    <tr>
                      <td>Created on</td>
                      <td><%= dt.strftime("%B") %>  <%= @group_record["createdAt"][8..9].to_i.ordinalize %>, <%=dt.strftime("%Y") %></td>
                    </tr>
                    <tr>
                      <td>Group Icon</td>
                      <div class="form-group">
                        <td id= "createFile">
                          <span id= "form_cancel" class="btn btn-large btn-default btn-file">
                            Choose File
                            <%= file_field_tag :file %>
                          </span>
                        </td>
                      </div>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div id= "custom_footer" class="panel-footer">
            <!--<span class="pull-right">-->
              <button type="button" id="cancel" class="btn btn-sm btn-danger button-right">
                <i class="glyphicon glyphicon-remove"></i>
              </button>
              <%= submit_tag("Save", class: 'btn btn-sm btn-success button-right', 'data-disable-with' => "Saving") %>
            <!--</span>-->
          </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <div id= "ovrlay"</div></div>
  <div class="container" id="add_user_modal" style="display: none">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xs-offset-0 col-sm-offset-0 col-md-offset-3 col-lg-offset-3 toppad" >
        <div class="panel panel-info">
          <div class="panel-heading">
            <h3 class="panel-title">New Member</h3>
          </div>
          <%= form_tag(edit_group_path(@group_id), multipart: true, method: 'get') do %>
          <div class="panel-body center_wrapper">
            <div id= "modal_name">Email</div>
            <div id= "modal_name_input"><%= text_field_tag(:new_name, "", :required => true, class: "form-control") %></div>
          </div>
          <div id= "custom_footer" class="panel-footer">
            <!--<span class="pull-right">-->
              <button type="button" id="modal_exit" class="btn btn-sm btn-danger button-right">
                <i class="glyphicon glyphicon-remove"></i>
              </button>
              <%= submit_tag("Add", class: 'btn btn-sm btn-success button-right', 'data-disable-with' => "Adding") %>
            <!--</span>-->
          </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>

<div class= "center_wrapper">
  <%if @permissions%>
    <div id= "new_member" class="project">
      <a><%= image_tag "add.png", height: '100', width: '100' %></a>
      <a style="text-decoration: none"><h2>Add Member</h2></a>
    </div>
  <%end%>  
  <% @users.each do |user| %>
    <% if user["user_info_ptr"]["profile_picture"]
      tempStr = user["user_info_ptr"]["profile_picture"].url
      profile_picture = tempStr.gsub("http" , "https")
    else
      profile_picture = "profile_picture.png"
    end
    %>
  <div id = <%=user["objectId"]%> class="project">
    <a><%= image_tag profile_picture, height: '100', width: '100' %></a>
    <h2 style= "color: white"><%=user["user_info_ptr"]["first_name"]%> <%=user["user_info_ptr"]["last_name"]%></h2>
    <%if user["status"] == "pending"%>
      <div class= "center_wrapper">
        <p>Status: Pending</p>
      </div>
    <%else%>
      <% d = DateTime.new(user["updatedAt"][0..3].to_i, user["updatedAt"][5..6].to_i, user["updatedAt"][8..9].to_i) %>
      <p>Joined on <%= d.strftime("%B") %>  <%= user["updatedAt"][8..9].to_i.ordinalize %>, <%=d.strftime("%Y") %> </p>
    <%end%>
    <%if @permissions && user["user_info_ptr"]["objectId"] != @user_info["objectId"]%>
      <%= button_to 'Delete', group_path(@group_id, :delete_user_id => user["objectId"]), :id => "delete_btn", :class => 'btn btn-default', method: :delete%>
    <%end%>
  </div>
  <% end %>
</div>

<table id="mysched" style="width:100%">
  <tr>
    <td style="background-color: grey">Hour</td>
    <td style="background-color: grey">Sunday</td>
    <td style="background-color: grey">Monday</td>
    <td style="background-color: grey">Tuesday</td>
    <td style="background-color: grey">Wednesday</td>
    <td style="background-color: grey">Thursday</td>
    <td style="background-color: grey">Friday</td>
    <td style="background-color: grey">Saturday</td>
  </tr>
  <%= @users.length %>
  <% @i = 0 %>
  <% until @i == 252 %>
      <% @available = 0 %>
      
      <% if @i % 7 == 0%>
        <% if @i % 14 == 0%>
          <tr id="row">
        <% else %>
          <tr id="row" style="border-bottom:1pt solid black;">
        <% end %>
           <td style="background-color: grey;">
             <% if (@i/14+6) == 12 && (@i % 14) == 0 %>
               <%= (@i/14+6) %>:00
             <% elsif (@i/14+6) == 12 && (@i % 14) != 0 %>
               <%= (@i/14+6)%>:30
             <% else%>
               <% if (@i % 14) != 0 %>
                 <%= (@i/14+6) % 12 %>:30 
               <% else%>
                 <%= (@i/14+6) % 12%>:00 
               <% end %>
             <% end %>
             <% if ((@i/14+6)) / 12 >= 1%>
               pm
             <% else %>
               am
             <% end %>
           </td>
           <% if @users[0]["user_info_ptr"]["times"][@i] == 1 %>
             <td style="background-color: rgb(0, 0, 0);">
           <% else %>
             <td style="background-color: rgb(255, 255, 255);">
           <% end %>
           <input type="hidden" name="times[<%=@i%>]" value="<%= @users[0]["user_info_ptr"]["times"][@i] %>"></td>
        <% elsif ((@i+1) % 7) == 0 %>
           <% if @users[0]["user_info_ptr"]["times"][@i] == 1 %>
             <td style="background-color: rgb(0, 0, 0);">
           <% else %>
             <td style="background-color: rgb(255, 255, 255);">
           <% end %>
           <input type="hidden" name="times[<%=@i%>]" value="<%= @users[0]["user_info_ptr"]["times"][@i] %>"></td>
        </tr>
        <% else %>
            <% if @users[0]["user_info_ptr"]["times"][@i] == 1 %>
             <td style="background-color: rgb(0, 0, 0);">
           <% else %>
             <td style="background-color: rgb(255, 255, 255);">
           <% end %>
           <input type="hidden" name="times[<%=@i%>]" value="<%= @users[0]["user_info_ptr"]["times"][@i] %>"></td>
        <% end %>
      <% @i = @i + 1%>
  <% end %>
</table>


</body>


